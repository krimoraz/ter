\documentclass[12pt,french]{article}

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage[a4paper,margin=2cm]{geometry}
\usepackage{amsmath}
\usepackage[pyfuture=all, autoprint=true, gobble=auto]{pythontex}

\usepackage{multicol}

\usepackage[lastexercise,answerdelayed]{exercise}

\usepackage[np,autolanguage]{numprint}
\usepackage{babel}

\author{Vincent-Xavier Jumel}


\begin{document}

\begin{sympyblock}
  var('x')

  func = 'sin(x)*cos(x)'

  question = "Donner la dérivée de ${}$".format(latex(eval(func)))

  deriv = 'Derivative({} ,x).doit()'.format(func)
  réponse = "La dérivée est ${}$".format(latex(eval(deriv)))

  print(r'\begin{Exercise}')
  print(r'\Question')
  print(question)
  print(r'\end{Exercise}')
  print(r'\begin{Answer}')
  print(réponse)
  print(r'\end{Answer}')

  print(r'\pagebreak')
  print(r'\shipoutAnswer')
\end{sympyblock}
\printpythontex
\pagebreak

\begin{sympycode}
  var('x')

  funcs = ['x**2', 'sin(x)' ]

  print(r'\begin{Exercise}')
  for func in funcs:
      question = "Donner la dérivée de ${}$".format(latex(eval(func)))
      print(r'\Question')
      print(question)

  print(r'\end{Exercise}')
  print(r'\begin{Answer}')
  for func in funcs:
      deriv = 'Derivative({} ,x).doit()'.format(func)
      réponse = "La dérivée est ${}$".format(latex(eval(deriv)))
      print(r'\Question')
      print(réponse)

  print(r'\end{Answer}')

  print(r'\pagebreak')
  print(r'\shipoutAnswer')
\end{sympycode}

\end{document}
